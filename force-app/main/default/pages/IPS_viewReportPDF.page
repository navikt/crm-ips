<apex:page standardController="ips_report__c"
		extensions="IPS_viewReportPDFController" 
        showHeader="false"
        renderAs="PDF">
    
    <div style="font-family:SansSerif !important;margin-left:12px;margin-right:12px;font-size: 12px;">
        <!-- NAV logo -->
        <center>
            <apex:image id="theImage" value="{!$Resource.logo}" width="115px" height="80px" alt="NAV logo"/>
        </center>
        
        <!-------------------------------- Heading --------------------------------------------->
        <h1 style="background-color: #F1F1F1; !important;">{!currentRecord.IPS_subject__c} - {!currentTrail.ips_Participant__r.name}</h1>
               
        <!-------------------------------- Innledning ------------------------------------------>
        <h2>Innledning</h2>
        <apex:panelGrid columns="2" id="innledning" width="60%">
            <apex:outputLabel >Deltaker :</apex:outputLabel>
            <apex:outputField label="Deltaker" value="{!currentTrail.ips_Participant__r.name}"></apex:outputField>
            
            <apex:outputLabel >Jobbspesialist :</apex:outputLabel>
            <apex:outputField label="Eier" value="{!currentTrail.IPS_ownerName__c}"></apex:outputField>
            
            <apex:outputLabel rendered="{!isIPS}">Behandlingsteam :</apex:outputLabel>
            <apex:outputField rendered="{!isIPS}" label="Team" value="{!currentTrail.ips_Behandlingsteam__c}"></apex:outputField>
            
            <!--
            <apex:outputLabel rendered="{!isUO}">Ansvarlig :</apex:outputLabel>
            <apex:outputField rendered="{!isUO}" label="Team" value="{!currentTrail.ips_Applying_Department__c}"></apex:outputField>
			-->
            
            <apex:outputLabel >NAV veileder :</apex:outputLabel>
            <apex:outputField label="veileder" value="{!currentTrail.ips_NAV_supervisor__c}"></apex:outputField>
            
            <apex:outputLabel >Startdato :</apex:outputLabel>
            <apex:outputText value="{0,date,dd'.'MM'.'yyyy}">
                                    <apex:param value="{!currentTrail.Oppstartsdato__c}"/>
                                </apex:outputText>
            
            <apex:outputLabel rendered="{!isEndReport}">Sluttdato :</apex:outputLabel>
            <apex:outputField rendered="{!isEndReport}" label="slutt" value="{!currentTrail.ips_End_Date__c}"></apex:outputField> 
            
            <apex:outputLabel rendered="{!isEndReport}">Sluttårsak :</apex:outputLabel>
            <apex:outputField rendered="{!isEndReport}" label="aarsak" value="{!currentTrail.End_Cause__c}"></apex:outputField>
            
            <apex:outputLabel rendered="{!isEndReport}">Underårsak :</apex:outputLabel>
            <apex:outputText rendered="{!isEndReport}">{!underAarsak}</apex:outputText>
        </apex:panelGrid>
        
        <!----------------------------- Body ---------------------------------------------------->

            
            <!---------------------- Intervall -------------------------------------------------->
            <apex:outputPanel rendered="{!isIntervallReport}"  layout="block">
                <h2>Oppsummering av perioden fra {!startDatoText} - {!sluttDatoText}</h2>
                
                <apex:outputText rendered="{!isIPS}"><h3>Prioriterte yrkesønsker:</h3></apex:outputText>                
                <apex:outputText rendered="{!isUO}"><h3>Hovedmål: </h3></apex:outputText>
        		<apex:outputField value="{!currentTrail.ips_Main_goal__c}"></apex:outputField>
                <p></p>
                
                <apex:outputText ><h3>Fullførte delmål i perioden:</h3></apex:outputText>
                <apex:outputField value="{!currentRecord.IPS_summarizeIntervallPeriode__c}"></apex:outputField>
                <p></p>
                
                <table style="width: 100%;border:1px solid #262626">
                    <tr style="background-color: #F1F1F1;">
                        <th style="width: 15%;">Emne</th>
                        <th style="width: 15%;">Opprettet dato</th>
                        <th style="width: 15%;">Frist</th>
                        <th style="width: 15%;">Fullført dato</th>
                        <th style="width: 40%;">Beskrivelse av målet</th>
                    </tr>
                    <apex:repeat value="{!closedIntervallGoal}" var="goal" >
                        <tr style="vertical-align:top;border:1px solid #FF0000;">
                            <td style="border:1px solid #ffd399;"><apex:outputField value="{!goal.Subject}"/></td>
                            <td style="border:1px solid #ffd399;">
                                <apex:outputText value="{0,date,dd'.'MM'.'yyyy}">
                                    <apex:param value="{!goal.CreatedDate}"/>
                                </apex:outputText>
                            </td>
                            <td style="border:1px solid #ffd399;">
                                <apex:outputText value="{0,date,dd'.'MM'.'yyyy}">
                                    <apex:param value="{!goal.ActivityDate}"/>
                                </apex:outputText>
                            </td>
                            <td style="border:1px solid #ffd399;">
                                <apex:outputText value="{0,date,dd'.'MM'.'yyyy}">
                                    <apex:param value="{!goal.CompletedDateTime}"/>
                                </apex:outputText>
                            </td>
                            <!--<td style="border:1px solid #FF0000;"><apex:outputField /></td>-->
                            <td style="border:1px solid #ffd399;"><apex:outputField value="{!goal.Description}"/></td>
                        </tr>
                    </apex:repeat>
                </table>
                <p></p>
                
                <apex:outputText ><h3>Samarbeid mellom jobbspesialist og deltaker i perioden: </h3></apex:outputText>
                <apex:outputText ><h4>Møter deltaker har deltatt på i perioden:</h4></apex:outputText>
                <table style="width: 100%;border:1px solid #262626">
                    <tr style="background-color: #F1F1F1;">
                        <th style="width: 15%;">Emne</th>
                        <th style="width: 15%;">Møtedato</th>
                    </tr>
                    <apex:repeat value="{!completedIntervallPartMeeting}" var="partMeet" >
                        <tr style="vertical-align:top;border:1px solid #FF0000;">
                            <td style="border:1px solid #ffd399;"><apex:outputField value="{!partMeet.Subject}"/></td>
                            <td style="border:1px solid #ffd399;">
                                <apex:outputText value="{0,date,dd'.'MM'.'yyyy}">
                                    <apex:param value="{!partMeet.ActivityDate}"/>
                                </apex:outputText>
                            </td>
                        </tr>
                    </apex:repeat>
                </table>
                
                <apex:outputText ><h4>Møter deltaker ikke har møtt til i perioden:</h4></apex:outputText>
                <table style="width: 100%;border:1px solid #262626">
                    <tr style="background-color: #F1F1F1;">
                        <th style="width: 15%;">Emne</th>
                        <th style="width: 15%;">Møtedato</th>
                    </tr>
                    <apex:repeat value="{!notAttendedIntervallPartMeeting}" var="notMeet" >
                        <tr style="vertical-align:top;border:1px solid #FF0000;">
                            <td style="border:1px solid #ffd399;"><apex:outputField value="{!notMeet.Subject}"/></td>
                            <td style="border:1px solid #ffd399;">
                                <apex:outputText value="{0,date,dd'.'MM'.'yyyy}">
                                    <apex:param value="{!notMeet.ActivityDate}"/>
                                </apex:outputText>
                            </td>
                        </tr>
                    </apex:repeat>
                </table>
                <p></p>
                
                <apex:outputText ><h3>Samarbeid med arbeidsgivere i perioden: </h3></apex:outputText>
                <apex:outputText rendered="{!isUO}"><h4>Relasjonsbyggende møter gjennomført med arbeidsgiver(e) i perioden:</h4></apex:outputText>
                <apex:outputText rendered="{!isIPS}"><h4>Møter gjennomført med arbeidsgiver(e) i perioden:</h4></apex:outputText>

                 <table style="width: 100%;border:1px solid #262626">
                    <tr style="background-color: #F1F1F1;">
                        <th style="width: 15%;">Arbeidsgiver</th>
                        <th style="width: 15%;">Møtedeltagere</th>
                        <th style="width: 15%;">Emne</th>
                        <th style="width: 15%;">Møtedato</th>
                        <th style="width: 15%;">Møtekategori</th>
                    </tr>
                    <apex:repeat value="{!emplCompleteJobDevelopment}" var="ipsJob" >
                        <tr style="vertical-align:top;border:1px solid #FF0000;">
                            <td style="border:1px solid #ffd399;"><apex:outputField value="{!ipsJob.IPS_employerName__c}"/></td>
                            <td style="border:1px solid #ffd399;"><apex:outputField value="{!ipsJob.Konto_kontakt__r.Name}"/></td>
                            <td style="border:1px solid #ffd399;"><apex:outputField value="{!ipsJob.Subject}"/></td>
                            <td style="border:1px solid #ffd399;">
                                <apex:outputText value="{0,date,dd'.'MM'.'yyyy}">
                                    <apex:param value="{!ipsJob.ActivityDate}"/>
                                </apex:outputText>
                            </td>
                            <td style="border:1px solid #ffd399;"><apex:outputField value="{!ipsJob.ips_Subcategory_Type_IPS__c}"/></td>
                        </tr>
                    </apex:repeat>
                </table>
  
                <apex:outputText ><h3>Deltagelse i jobb/arbeidstrening </h3></apex:outputText>
                <table style="width: 100%;border:1px solid #262626">
                    <apex:repeat value="{!activeParticipantsJobs}" var="jobs" >
                    <tr >
                        <th style="width: 20%;background-color: #F1F1F1;">Stilling som</th>
                        <td style="border:1px solid #ffd399;"><apex:outputField value="{!jobs.Name}"/></td>
                    </tr>
                    <tr>
                        <th style="width: 20%;background-color: #F1F1F1;">Arbeidsgiver</th>
                        <td style="border:1px solid #ffd399;"><apex:outputField value="{!jobs.ips_Employer__r.Name}"/></td>
                    </tr>
                    <tr>
                        <th style="width: 20%;background-color: #F1F1F1;">Startdato</th>
                        <td style="border:1px solid #ffd399;">
                                <apex:outputText value="{0,date,dd'.'MM'.'yyyy}">
                                    <apex:param value="{!jobs.ips_Start_Date__c}"/>
                                </apex:outputText>
                            </td>
                    </tr>
                    <tr>
                        <th style="width: 20%;background-color: #F1F1F1;">Sluttdato</th>
                        <td style="border:1px solid #ffd399;">
                                <apex:outputText value="{0,date,dd'.'MM'.'yyyy}">
                                    <apex:param value="{!jobs.ips_End_Date__c}"/>
                                </apex:outputText>
                            </td>
                    </tr>
                    <tr>
                        <th style="width: 20%;background-color: #F1F1F1;">Jobbtype</th>
                        <td style="border:1px solid #ffd399;"><apex:outputField value="{!jobs.ips_Form_of_Employment__c}"/></td>
                    </tr>
                     <tr>
                        <th style="width: 20%;background-color: #F1F1F1;">Stillingsinstruks</th>
                        <td style="border:1px solid #ffd399;"><apex:outputField value="{!jobs.IPS_UO_Stillingsbeskrivelse__c}"/></td>
                    </tr>
                     <tr>
                        <th style="width: 20%;background-color: #F1F1F1;">Jobbstøtte</th>
                        <td style="border:1px solid #ffd399;"><apex:outputField value="{!jobs.ips_Job_Support__c}"/></td>
                    </tr>
                	<tr>
                        <th style="vertical-align:top;width: 20%;background-color: #F1F1F1;">Hva fungerte?</th>
                        <td style="border:1px solid #ffd399;"><apex:outputField value="{!jobs.ips_What_did_work_at_the_workplace__c}"/></td>
                        
                        
                    </tr>
                        <th style="vertical-align:top;width: 20%;background-color: #F1F1F1;">Hva fungerte ikke?</th>
                        <td style="border:1px solid #ffd399;"><apex:outputField value="{!jobs.ips_What_did_not_work_at_the_workplace__c}"/></td>
                    <tr>
                    </tr>
                        <tr style="background-color: ##FFFFFF;height:10px">
                        <th></th>
                        <td></td>
                    </tr>
                    </apex:repeat>
                </table>
                <p></p>
                
                <apex:outputText ><h3>Kurs/utdanning </h3></apex:outputText>
                <table style="width: 100%;border:1px solid #262626">
                    <tr style="background-color: #F1F1F1;">
                        <th style="width: 15%;">Jobb tittel</th>
                        <th style="width: 15%;">Institusjon</th>
                        <th style="width: 15%;">Startdato</th>
                        <th style="width: 15%;">Type</th>
                    </tr>
                    <apex:repeat value="{!activeParticipantsEducations}" var="edu" >
                        <tr style="vertical-align:top;border:1px solid #FF0000;">
                            <td style="border:1px solid #ffd399;"><apex:outputField value="{!edu.Name}"/></td>
                            <td style="border:1px solid #ffd399;"><apex:outputField value="{!edu.ips_Name_of_the_Education_Institution__c}"/></td>
                            <td style="border:1px solid #ffd399;">
                                <apex:outputText value="{0,date,dd'.'MM'.'yyyy}">
                                    <apex:param value="{!edu.ips_Start_Date__c}"/>
                                </apex:outputText>
                            </td>
                            <td style="border:1px solid #ffd399;"><apex:outputField value="{!edu.ips_Form_of_Education__c}"/></td>
                        </tr>
                    </apex:repeat>
                </table>
                <p></p>
                
                <apex:outputText ><h3>Plan for kommende periode: </h3></apex:outputText>
                <apex:outputField value="{!currentRecord.IPS_summarizeIntervallNextPeriode__c}"></apex:outputField>
                <p></p>
                
                <apex:outputText ><h4>Planlagte delmål:</h4></apex:outputText>
                <table style="width: 100%;border:1px solid #262626">
                    <tr style="background-color: #F1F1F1;">
                        <th style="width: 15%;">Emne</th>
                        <th style="width: 15%;">Opprettet dato</th>
                        <th style="width: 15%;">Frist</th>
                    </tr>
                    <apex:repeat value="{!openIntervallGoal}" var="plangoal" >
                        <tr style="vertical-align:top;border:1px solid #FF0000;">
                            <td style="border:1px solid #ffd399;"><apex:outputField value="{!plangoal.Subject}"/></td>
                            <td style="border:1px solid #ffd399;">
                                <apex:outputText value="{0,date,dd'.'MM'.'yyyy}">
                                    <apex:param value="{!plangoal.CreatedDate}"/>
                                </apex:outputText>
                            </td>
                            <td style="border:1px solid #ffd399;">
                                <apex:outputText value="{0,date,dd'.'MM'.'yyyy}">
                                    <apex:param value="{!plangoal.ActivityDate}"/>
                                </apex:outputText>
                            </td>
                        </tr>
                    </apex:repeat>
                </table>
                
                <apex:outputText ><h4>Planlagte møter:</h4></apex:outputText>
                
                <table style="width: 100%;border:1px solid #262626">
                    <tr style="background-color: #F1F1F1;">
                        <th style="width: 15%;">Emne</th>
                        <th style="width: 15%;">Møtedato</th>
                        <th style="width: 15%;">Type</th>
                    </tr>
                    <apex:repeat value="{!openIntervallMeeting}" var="next" >
                        <tr style="vertical-align:top;border:1px solid #FF0000;">
                            <td style="border:1px solid #ffd399;"><apex:outputField value="{!next.Subject}"/></td>
                            <td style="border:1px solid #ffd399;">
                                <apex:outputText value="{0,date,dd'.'MM'.'yyyy}">
                                    <apex:param value="{!next.ActivityDate}"/>
                                </apex:outputText>
                            </td>
                            <td style="border:1px solid #ffd399;"><apex:outputField value="{!next.IPS_Type__c}"/></td>
                        </tr>
                    </apex:repeat>
                </table>
                
            </apex:outputPanel>
            
            <!---------------------- End -------------------------------------------------------->
            <apex:outputPanel rendered="{!isEndReport}" layout="block">
                <apex:outputText rendered="{!isIPS}"><h2>Deltakers mål med IPS</h2></apex:outputText>
                
                <apex:outputText rendered="{!isIPS}"><h3>Prioriterte yrkesønsker:</h3></apex:outputText>
                
                <apex:outputText rendered="{!isUO}"><h2>Yrkeskartlegging og karriereplanlegging</h2></apex:outputText>
                <apex:outputText rendered="{!isUO}"><h3>Ønsket yrke/bransje/karriere</h3></apex:outputText>
                <apex:outputField rendered="{!isUO}" value="{!currentTrail.ips_Desired_profession_industry_career__c }"></apex:outputField>
                <div style ="padding-bottom: 5px;"></div>
                <apex:outputField value="{!currentRecord.IPS_endReportSumm1__c}"></apex:outputField>
                
                <apex:outputText rendered="{!isUO}"><h2>Handlingsplan</h2></apex:outputText>
                <apex:outputText rendered="{!isUO}"><h3>Hovedmål</h3></apex:outputText>
                <apex:outputField rendered="{!isUO}" value="{!currentTrail.ips_Main_goal__c }"></apex:outputField>
                
                <apex:outputText ><h3>Delmål</h3></apex:outputText>
                <table style="width: 100%;border:1px solid #262626">
                    <tr style="background-color: #F1F1F1;">
                        <th style="width: 15%;">Emne</th>
                        <th style="width: 15%;">Opprettet dato</th>
                        <th style="width: 15%;">Frist</th>
                        <th style="width: 15%;">Fullført dato</th>
                        <th style="width: 40%;">Beskrivelse av målet</th>
                    </tr>
                    <apex:repeat value="{!closedIntervallGoal}" var="goal" >
                        <tr style="vertical-align:top;border:1px solid #FF0000;">
                            <td style="border:1px solid #ffd399;"><apex:outputField value="{!goal.Subject}"/></td>
                            <td style="border:1px solid #ffd399;">
                                <apex:outputText value="{0,date,dd'.'MM'.'yyyy}">
                                    <apex:param value="{!goal.CreatedDate}"/>
                                </apex:outputText>
                            </td>
                            <td style="border:1px solid #ffd399;">
                                <apex:outputText value="{0,date,dd'.'MM'.'yyyy}">
                                    <apex:param value="{!goal.ActivityDate}"/>
                                </apex:outputText>
                            </td>
                            <td style="border:1px solid #ffd399;">
                                <apex:outputText value="{0,date,dd'.'MM'.'yyyy}">
                                    <apex:param value="{!goal.CompletedDateTime}"/>
                                </apex:outputText>
                            </td>
                            <!--<td style="border:1px solid #FF0000;"><apex:outputField /></td>-->
                            <td style="border:1px solid #ffd399;"><apex:outputField value="{!goal.Description}"/></td>
                        </tr>
                    </apex:repeat>
                </table>
                
                <apex:outputText rendered="{!isUO}"><h3>Deltagermøter</h3></apex:outputText>
                
                <apex:outputText rendered="{!isUO}"><h3>Oppsummering av samarbeid mellom deltaker og jobbspesialist</h3></apex:outputText>
                <apex:outputField value="{!currentRecord.IPS_endReportSumm2__c}"></apex:outputField>
                
                <apex:outputText rendered="{!isUO}"><h3>Samarbeid med arbeidsgivere</h3></apex:outputText>
                <apex:outputText rendered="{!isUO}">Jobbspesialist har enten på egenhånd, eller sammen med deg, vært i kontakt med følgende arbeidsgivere for å utforske mulighetene for arbeid:</apex:outputText>
                
               	<apex:outputText rendered="{!isUO}"><h3>Oppsummering av samarbeid med arbeidsgivere</h3></apex:outputText>
                <apex:outputField value="{!currentRecord.IPS_endReportSumm3__c}"></apex:outputField> 
                
                <apex:outputText rendered="{!isUO}"><h3>Deltagelse i jobb/arbeidstrening</h3></apex:outputText>
                <table style="width: 100%;border:1px solid #262626">
                        <tr style="background-color: ##FFFFFF;height:10px">
                        <th></th>
                        <td></td>
                    </tr>
                    <apex:repeat value="{!activeParticipantsJobs}" var="jobs" >
                    <tr >
                        <th style="width: 20%;background-color: #F1F1F1;">Stilling som</th>
                        <td style="border:1px solid #ffd399;"><apex:outputField value="{!jobs.Name}"/></td>
                    </tr>
                    <tr>
                        <th style="width: 20%;background-color: #F1F1F1;">Arbeidsgiver</th>
                        <td style="border:1px solid #ffd399;"><apex:outputField value="{!jobs.ips_Employer__r.Name}"/></td>
                    </tr>
                    <tr>
                        <th style="width: 20%;background-color: #F1F1F1;">Startdato</th>
                        <td style="border:1px solid #ffd399;">
                                <apex:outputText value="{0,date,dd'.'MM'.'yyyy}">
                                    <apex:param value="{!jobs.ips_Start_Date__c}"/>
                                </apex:outputText>
                            </td>
                    </tr>
                    <tr>
                        <th style="width: 20%;background-color: #F1F1F1;">Sluttdato</th>
                        <td style="border:1px solid #ffd399;">
                                <apex:outputText value="{0,date,dd'.'MM'.'yyyy}">
                                    <apex:param value="{!jobs.ips_End_Date__c}"/>
                                </apex:outputText>
                            </td>
                    </tr>
                    <tr>
                        <th style="width: 20%;background-color: #F1F1F1;">Jobbtype</th>
                        <td style="border:1px solid #ffd399;"><apex:outputField value="{!jobs.ips_Form_of_Employment__c}"/></td>
                    </tr>
                     <tr>
                        <th style="width: 20%;background-color: #F1F1F1;">Stillingsinstruks</th>
                        <td style="border:1px solid #ffd399;"><apex:outputField value="{!jobs.IPS_UO_Stillingsbeskrivelse__c}"/></td>
                    </tr>
                     <tr>
                        <th style="width: 20%;background-color: #F1F1F1;">Jobbstøtte</th>
                        <td style="border:1px solid #ffd399;"><apex:outputField value="{!jobs.ips_Job_Support__c}"/></td>
                    </tr>
                	<tr>
                        <th style="vertical-align:top;width: 20%;background-color: #F1F1F1;">Hva fungerte?</th>
                        <td style="border:1px solid #ffd399;"><apex:outputField value="{!jobs.ips_What_did_work_at_the_workplace__c}"/></td>
                        
                        
                    </tr>
                        <th style="vertical-align:top;width: 20%;background-color: #F1F1F1;">Hva fungerte ikke?</th>
                        <td style="border:1px solid #ffd399;"><apex:outputField value="{!jobs.ips_What_did_not_work_at_the_workplace__c}"/></td>
                    <tr>
                    </tr>
                        <tr style="background-color: ##FFFFFF;height:10px">
                        <th></th>
                        <td></td>
                    </tr>
                    </apex:repeat>
                </table>
                
                <apex:outputText rendered="{!isUO}"><h3>Oppsummering av jobbdeltakelse</h3></apex:outputText>
                <apex:outputField value="{!currentRecord.IPS_endReportSumm4__c}"></apex:outputField>
                
                <apex:outputText rendered="{!isUO}"><h3>Avsluttende Oppsummering</h3></apex:outputText>
                <apex:outputField value="{!currentRecord.IPS_endReportSumm5__c}"></apex:outputField>
                
            </apex:outputPanel>
    </div>
</apex:page>